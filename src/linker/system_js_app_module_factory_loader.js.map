{"version":3,"file":"system_js_app_module_factory_loader.js","sourceRoot":"","sources":["../../../../../modules/@angular/core/src/linker/system_js_app_module_factory_loader.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;;AAGH,mBAAyB,OAAO,CAAC,CAAA;AACjC,qBAAqB,gBAAgB,CAAC,CAAA;AAItC,yBAAuB,YAAY,CAAC,CAAA;AAEpC,IAAM,UAAU,GAAG,GAAG,CAAC;AACvB;IACE,iCAAoB,SAAmB;QAAnB,cAAS,GAAT,SAAS,CAAU;IAAG,CAAC;IAE3C,sCAAI,GAAJ,UAAK,IAAY;QAAjB,iBASC;QARC,IAAA,2BAAiD,EAA5C,cAAM,EAAE,kBAAU,CAA2B;QAClD,EAAE,CAAC,CAAC,UAAU,KAAK,SAAS,CAAC;YAAC,UAAU,GAAG,SAAS,CAAC;QAErD,MAAM,CAAO,aAAO;aACf,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;aACrB,IAAI,CAAC,UAAC,MAAW,IAAK,OAAA,MAAM,CAAC,UAAU,CAAC,EAAlB,CAAkB,CAAC;aACzC,IAAI,CAAC,UAAC,IAAS,IAAK,OAAA,aAAa,CAAC,IAAI,EAAE,MAAM,EAAE,UAAU,CAAC,EAAvC,CAAuC,CAAC;aAC5D,IAAI,CAAC,UAAC,IAAS,IAAK,OAAA,KAAI,CAAC,SAAS,CAAC,qBAAqB,CAAC,IAAI,CAAC,EAA1C,CAA0C,CAAC,CAAC;IACvE,CAAC;IACH,kBAAkB;IACX,kCAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,eAAU,EAAE;KACnB,CAAC;IACF,kBAAkB;IACX,sCAAc,GAA2D;QAChF,EAAC,IAAI,EAAE,mBAAQ,GAAG;KACjB,CAAC;IACF,8BAAC;AAAD,CAAC,AArBD,IAqBC;AArBY,+BAAuB,0BAqBnC,CAAA;AAED,IAAM,qBAAqB,GAAG,YAAY,CAAC;AAC3C,IAAM,oBAAoB,GAAG,WAAW,CAAC;AAEzC;;;GAGG;AACH;IAAA;IAUA,CAAC;IATC,6CAAI,GAAJ,UAAK,IAAY;QACf,IAAA,2BAAiD,EAA5C,cAAM,EAAE,kBAAU,CAA2B;QAClD,EAAE,CAAC,CAAC,UAAU,KAAK,SAAS,CAAC;YAAC,UAAU,GAAG,SAAS,CAAC;QAErD,MAAM,CAAO,aAAO;aACf,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,qBAAqB,CAAC;aAC7C,IAAI,CAAC,UAAC,MAAW,IAAK,OAAA,MAAM,CAAC,UAAU,GAAG,oBAAoB,CAAC,EAAzC,CAAyC,CAAC;aAChE,IAAI,CAAC,UAAC,OAAY,IAAK,OAAA,aAAa,CAAC,OAAO,EAAE,MAAM,EAAE,UAAU,CAAC,EAA1C,CAA0C,CAAC,CAAC;IAC1E,CAAC;IACH,qCAAC;AAAD,CAAC,AAVD,IAUC;AAVY,sCAA8B,iCAU1C,CAAA;AAED,uBAAuB,KAAU,EAAE,UAAkB,EAAE,UAAkB;IACvE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACX,MAAM,IAAI,KAAK,CAAC,kBAAgB,UAAU,cAAS,UAAU,MAAG,CAAC,CAAC;IACpE,CAAC;IACD,MAAM,CAAC,KAAK,CAAC;AACf,CAAC","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nimport {Injectable} from '../di';\nimport {global} from '../facade/lang';\n\nimport {AppModuleFactory} from './app_module_factory';\nimport {AppModuleFactoryLoader} from './app_module_factory_loader';\nimport {Compiler} from './compiler';\n\nconst _SEPARATOR = '#';\nexport class SystemJsAppModuleLoader implements AppModuleFactoryLoader {\n  constructor(private _compiler: Compiler) {}\n\n  load(path: string): Promise<AppModuleFactory<any>> {\n    let [module, exportName] = path.split(_SEPARATOR);\n    if (exportName === undefined) exportName = 'default';\n\n    return (<any>global)\n        .System.import(module)\n        .then((module: any) => module[exportName])\n        .then((type: any) => checkNotEmpty(type, module, exportName))\n        .then((type: any) => this._compiler.compileAppModuleAsync(type));\n  }\n/** @nocollapse */\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: {type: Function, decorators?: DecoratorInvocation[]}[] = [\n{type: Compiler, },\n];\n}\n\nconst FACTORY_MODULE_SUFFIX = '.ngfactory';\nconst FACTORY_CLASS_SUFFIX = 'NgFactory';\n\n/**\n * AppModuleFactoryLoader that uses SystemJS to load AppModuleFactories\n * @experimental\n */\nexport class SystemJsAppModuleFactoryLoader implements AppModuleFactoryLoader {\n  load(path: string): Promise<AppModuleFactory<any>> {\n    let [module, exportName] = path.split(_SEPARATOR);\n    if (exportName === undefined) exportName = 'default';\n\n    return (<any>global)\n        .System.import(module + FACTORY_MODULE_SUFFIX)\n        .then((module: any) => module[exportName + FACTORY_CLASS_SUFFIX])\n        .then((factory: any) => checkNotEmpty(factory, module, exportName));\n  }\n}\n\nfunction checkNotEmpty(value: any, modulePath: string, exportName: string): any {\n  if (!value) {\n    throw new Error(`Cannot find '${exportName}' in '${modulePath}'`);\n  }\n  return value;\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}